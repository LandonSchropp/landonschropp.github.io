---
import type { Note } from "../../types";
import ContentLayout from "../../layouts/content.astro";
import { fetchNoteSummaries } from "../../data/notes";
import { fetchPageMarkdown } from "../../data/notion";

export async function getStaticPaths() {
  let noteSummaries = await fetchNoteSummaries();

  return noteSummaries.map((noteSummary) => {
    return {
      params: { slug: noteSummary.slug },
      props: { noteSummary },
    };
  });
}

let { noteSummary } = Astro.props;
let note: Note = { ...noteSummary, content: await fetchPageMarkdown(noteSummary.id) };
---

<ContentLayout title="Content" description="Description">
  <h1>{note.title}</h1>
  <p>{note.content}</p>
</ContentLayout>
