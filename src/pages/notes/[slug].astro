---
import type { Note } from "../../types";
import { ContentLayout } from "../../layouts/content-layout";
import { fetchNoteSummaries } from "../../data/notes";
import { fetchPageHtml } from "../../data/notion";

export async function getStaticPaths() {
  let noteSummaries = await fetchNoteSummaries();

  return noteSummaries.map((noteSummary) => {
    return {
      params: { slug: noteSummary.slug },
      props: { noteSummary },
    };
  });
}

let { noteSummary } = Astro.props;
let note: Note = { ...noteSummary, content: await fetchPageHtml(noteSummary.id) };
---

<ContentLayout title="Content" description="Description">
  <article set:html={note.content} />
</ContentLayout>
