<!DOCTYPE html><html lang="en-us" class="h-full text-[19px] md:text-[21px] lg:text-[22px]"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/_next/static/css/052c8b13a035a85d.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/5aabacac4a7bcbc4.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/b7bdc2d4d4aa6554.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/9cad1c3a621a47c7.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/34f92507e61baad2.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-c955a7fd519a96e8.js"/><script src="/_next/static/chunks/72517ffc-002b5c99645a8b93.js" async=""></script><script src="/_next/static/chunks/57-cb55d9a153904b49.js" async=""></script><script src="/_next/static/chunks/main-app-d15610cf83b95f34.js" async=""></script><script src="/_next/static/chunks/app/not-found-03d2bac40c7bb44b.js" async=""></script><script src="/_next/static/chunks/738-a0d7c9ce962eb776.js" async=""></script><script src="/_next/static/chunks/app/notes/layout-c9c0172185e9fa00.js" async=""></script><script src="/_next/static/chunks/867-34944a4304bcfa99.js" async=""></script><script src="/_next/static/chunks/app/notes/%5Bslug%5D/page-5c68db966a75d177.js" async=""></script><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"/><link rel="shortcut icon" type="image/png" href="/_next/static/media/flannel.5168cfc2.png"/><title>Landon Schropp – Database Normalization</title><meta name="description" content="Landon Schropp&#x27;s notes about Database Normalization"/><meta name="author" content="Landon Schropp"/><link href="https://fonts.googleapis.com/css2?family=Gentium+Book+Plus:ital,wght@0,400;0,700;1,400;1,700&amp;family=Open+Sans:ital,wght@0,400;0,700;0,800;1,400;1,700;1,800&amp;family=Source+Code+Pro:ital,wght@0,400;0,700;1,400;1,700&amp;display=swap" rel="stylesheet"/><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="flex h-full flex-col bg-theme-background font-serif font-normal text-theme-text *:flex-[0_0_auto]"><nav class="my-3 flex gap-3 px-2 text-sm text-theme-extraLightText lg:justify-between max-lg:flex-col"><div class="flex justify-center"><a class="mx-2 block text-inherit transition-all duration-75 ease-in font-sans text-theme-lightText  " href="/"><span class="max-md:hidden">Landon Schropp</span><span class="md:hidden">Home</span></a><a class="mx-2 block text-inherit transition-all duration-75 ease-in font-sans text-theme-lightText  " href="/articles">Writing</a><a class="mx-2 block text-inherit transition-all duration-75 ease-in font-sans text-theme-lightText  " href="/notes">Notes</a><a class="mx-2 block text-inherit transition-all duration-75 ease-in font-sans text-theme-lightText  " href="/today-i-learned"><abbr class="no-underline lg:hidden" title="Today I Learned">TIL</abbr><span class="max-lg:hidden">Today I Learned</span></a></div><div class="flex justify-center"><a class="mx-2 block text-inherit transition-all duration-75 ease-in hocus:text-theme-accent " href="https://github.com/LandonSchropp"><svg viewBox="0 0 96 92" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="inline-block h-3.6 w-3.6 fill-[currentColor] align-middle undefined" title="GitHub"><title>github</title><g fill-rule="evenodd"><path d="M32.5603088,74.0782655 C32.5603088,74.4587393 32.1227638,74.7631185 31.5710767,74.7631185 C30.9432948,74.8201895 30.5057498,74.5158104 30.5057498,74.0782655 C30.5057498,73.6977916 30.9432948,73.3934125 31.4949819,73.3934125 C32.0656927,73.3363414 32.5603088,73.6407205 32.5603088,74.0782655 Z M26.6439399,73.2221992 C26.510774,73.6026731 26.8912479,74.0402181 27.4619587,74.1543602 C27.9565748,74.3445972 28.5272856,74.1543602 28.6414278,73.7738864 C28.7555699,73.3934125 28.3941197,72.9558675 27.8234089,72.7846543 C27.3287929,72.6514884 26.7771057,72.8417253 26.6439399,73.2221992 Z M35.0524127,72.8987964 C34.5007256,73.0319623 34.1202517,73.3934125 34.1773228,73.8309574 C34.2343939,74.2114313 34.7290099,74.4587393 35.2997208,74.3255735 C35.8514079,74.1924076 36.2318818,73.8309574 36.1748107,73.4504836 C36.1177396,73.0890334 35.6040999,72.8417253 35.0524127,72.8987964 Z M47.5700036,4.26325641e-14 C21.1841396,4.26325641e-14 1,20.0319501 1,46.417814 C1,67.5150909 14.2785386,85.5685768 33.2451618,91.9224907 C35.6801946,92.3600356 36.5362609,90.8571638 36.5362609,89.6206237 C36.5362609,88.4411546 36.4791898,81.9350512 36.4791898,77.9400754 C36.4791898,77.9400754 23.1626038,80.7936295 20.3661208,72.2710145 C20.3661208,72.2710145 18.1974196,66.7351195 15.0775338,65.3083424 C15.0775338,65.3083424 10.7211078,62.3216224 15.3819129,62.3786935 C15.3819129,62.3786935 20.1188127,62.7591674 22.7250588,67.2868066 C26.8912479,74.6299526 33.8729437,72.5183225 36.593332,71.2627587 C37.0308769,68.2189676 38.2674171,66.1073376 39.637123,64.8517737 C29.002878,63.6723047 18.2735144,62.1313855 18.2735144,43.8305916 C18.2735144,38.5990757 19.7193152,35.9738059 22.7631062,32.6256357 C22.2684902,31.3890955 20.6514762,26.2907455 23.2577223,19.7085473 C27.2336744,18.4720071 36.3840713,24.8449447 36.3840713,24.8449447 C40.1888102,23.7796178 44.2789044,23.2279307 48.3309513,23.2279307 C52.3829982,23.2279307 56.4730925,23.7796178 60.2778313,24.8449447 C60.2778313,24.8449447 69.4282283,18.4529834 73.4041804,19.7085473 C76.0104265,26.3097692 74.3934125,31.3890955 73.8987964,32.6256357 C76.9425875,35.9928295 78.8069095,38.6180994 78.8069095,43.8305916 C78.8069095,62.1884565 67.6019536,63.653281 56.9677085,64.8517737 C58.7178884,66.3546456 60.2017365,69.2081997 60.2017365,73.6787679 C60.2017365,80.0897528 60.1446655,88.0226334 60.1446655,89.5825763 C60.1446655,90.8191164 61.0197554,92.3219883 63.4357646,91.8844433 C82.4594588,85.5685768 95.3575235,67.5150909 95.3575235,46.417814 C95.3575235,20.0319501 73.9558675,4.26325641e-14 47.5700036,4.26325641e-14 Z M19.4910308,65.6127215 C19.2437228,65.8029585 19.3007939,66.2405034 19.6241967,66.6019536 C19.9285758,66.9063327 20.3661208,67.0394986 20.6134288,66.7921906 C20.8607368,66.6019536 20.8036657,66.1644086 20.4802629,65.8029585 C20.1758838,65.4985793 19.7383388,65.3654135 19.4910308,65.6127215 Z M17.4364718,64.0718023 C17.303306,64.3191103 17.4935429,64.6234894 17.8740168,64.8137264 C18.1783959,65.0039633 18.5588698,64.9468922 18.6920357,64.6805605 C18.8252015,64.4332525 18.6349646,64.1288734 18.2544907,63.9386364 C17.8740168,63.8244943 17.5696377,63.8815653 17.4364718,64.0718023 Z M23.6001488,70.8442374 C23.2957697,71.0915455 23.4099118,71.6622563 23.8474568,72.0237065 C24.2850018,72.4612514 24.8366889,72.5183225 25.0839969,72.2139434 C25.331305,71.9666354 25.2171628,71.3959246 24.8366889,71.0344744 C24.4181676,70.5969294 23.8474568,70.5398583 23.6001488,70.8442374 Z M21.4314476,68.0477544 C21.1270685,68.2379913 21.1270685,68.7326074 21.4314476,69.1701523 C21.7358267,69.6076973 22.2494665,69.7979343 22.4967745,69.6076973 C22.8011536,69.3603893 22.8011536,68.8657732 22.4967745,68.4282283 C22.2304428,67.9906833 21.7358267,67.8004464 21.4314476,68.0477544 Z" fill-rule="nonzero"></path></g></svg></a><a class="mx-2 block text-inherit transition-all duration-75 ease-in hocus:text-theme-accent " href="https://www.chess.com/member/landon"><svg viewBox="0 0 66 94" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="inline-block h-3.6 w-3.6 fill-[currentColor] align-middle undefined" title="Chess.com"><title>chess-com</title><g fill-rule="evenodd"><path d="M32.8765515,0.000347033209 C34.9673608,0.000347033209 36.942014,0.397080995 38.7424332,1.1332201 L38.5975603,1.07322462 C38.6288206,1.06552778 38.6577775,1.06656311 38.6843551,1.07659402 C44.3760027,3.34163743 48.3833872,8.77774162 48.3833872,15.1198632 C48.3833872,20.1595848 45.8279536,24.5764194 41.9367251,27.3510976 L53.1457861,34.5426104 C53.1457861,36.9775321 52.5650058,38.902819 51.403445,40.9979842 L41.5301789,40.9979842 C41.762491,45.3015666 39.9620719,55.7207663 56.165844,67.7821225 C61.8574916,72.0290789 65.1679396,79.1639657 65.1679396,87.8843828 C65.1679396,88.2807654 64.2967691,94 32.8765515,94 C1.45633391,94 0.585163362,88.2807654 0.585163362,87.8843828 C0.585163362,84.3169394 1.16594372,80.9760004 2.15327034,78.0314439 C2.19172015,77.9233039 2.24293522,77.8235346 2.30629326,77.731637 C3.84342918,73.6488124 6.30250442,70.2374765 9.58725897,67.7821225 C22.0015813,58.5678434 23.862702,50.2985066 24.1393809,44.9959711 C24.117374,44.8770176 24.106768,44.7519288 24.106768,44.6220536 C24.106768,43.1497754 24.106768,41.9606276 24.1648461,40.9979842 L14.2915799,40.9979842 C13.1300192,38.902819 12.5492388,36.9775321 12.5492388,34.5426104 L23.7582998,27.2944715 C19.8670714,24.5764194 17.3116378,20.1029587 17.3116378,15.0632371 C17.3116378,6.73920255 24.2810021,-0.0559276875 32.8765515,0.000347033209 Z" fill-rule="nonzero"></path></g></svg></a><a class="mx-2 block text-inherit transition-all duration-75 ease-in hocus:text-theme-accent " href="https://www.linkedin.com/in/landonschropp"><svg viewBox="0 0 79 78" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="inline-block h-3.6 w-3.6 fill-[currentColor] align-middle undefined" title="LinkedIn"><title>linked-in</title><g fill-rule="evenodd"><path d="M72.4540496,0 L5.57949606,0 C2.51521034,0 0.0254781979,2.52455357 0.0254781979,5.62366071 L0.0254781979,72.3763393 C0.0254781979,75.4754464 2.51521034,78 5.57949606,78 L72.4540496,78 C75.5183353,78 78.0254782,75.4754464 78.0254782,72.3763393 L78.0254782,5.62366071 C78.0254782,2.52455357 75.5183353,0 72.4540496,0 Z M23.5995853,66.8571429 L12.0388711,66.8571429 L12.0388711,29.6330357 L23.6169961,29.6330357 L23.6169961,66.8571429 L23.5995853,66.8571429 Z M17.8192282,24.5491071 C14.1107461,24.5491071 11.1161032,21.5370536 11.1161032,17.8459821 C11.1161032,14.1549107 14.1107461,11.1428571 17.8192282,11.1428571 C21.5102996,11.1428571 24.5223532,14.1549107 24.5223532,17.8459821 C24.5223532,21.5544643 21.5277103,24.5491071 17.8192282,24.5491071 L17.8192282,24.5491071 Z M66.9348532,66.8571429 L55.3741389,66.8571429 L55.3741389,48.75 C55.3741389,44.4321429 55.2870853,38.878125 49.3674425,38.878125 C43.3433353,38.878125 42.4205675,43.5790179 42.4205675,48.4366071 L42.4205675,66.8571429 L30.8598532,66.8571429 L30.8598532,29.6330357 L41.9504782,29.6330357 L41.9504782,34.7169643 L42.1071746,34.7169643 C43.6567282,31.7919643 47.4348532,28.7102679 53.0585139,28.7102679 C64.7585139,28.7102679 66.9348532,36.4232143 66.9348532,46.4517857 L66.9348532,66.8571429 L66.9348532,66.8571429 Z" fill-rule="nonzero"></path></g></svg></a><a class="mx-2 block text-inherit transition-all duration-75 ease-in hocus:text-theme-accent " href="mailto:schroppl@gmail.com"><svg viewBox="0 0 89 66" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="inline-block h-3.6 w-3.6 fill-[currentColor] align-middle undefined" title="Email"><title>email</title><g fill-rule="evenodd"><path d="M9.13301677,0 C4.57832927,0 0.883016771,3.6953125 0.883016771,8.25 C0.883016771,10.8453125 2.10332927,13.2859375 4.18301677,14.85 L41.5830168,42.9 C43.5423918,44.3609375 46.2236418,44.3609375 48.1830168,42.9 L85.5830168,14.85 C87.6627043,13.2859375 88.8830168,10.8453125 88.8830168,8.25 C88.8830168,3.6953125 85.1877043,0 80.6330168,0 L9.13301677,0 Z M0.883016771,19.25 L0.883016771,55 C0.883016771,61.0671875 5.81582927,66 11.8830168,66 L77.8830168,66 C83.9502043,66 88.8830168,61.0671875 88.8830168,55 L88.8830168,19.25 L51.4830168,47.3 C47.5642668,50.2390625 42.2017668,50.2390625 38.2830168,47.3 L0.883016771,19.25 Z" fill-rule="nonzero"></path></g></svg></a></div></nav><main class="mx-auto w-[70ch] max-w-full px-2 md:px-4"><!--$--><article class="my-6" data-category="Development"><header class="my-6 text-center"><h1 class="my-0"><span class="block mx-auto my-1 m-width[50ch] text-base font-normal font-serif italic text-theme-lightText [&amp;_a]:underline">My personal notes for</span> <span class="block"><a class="no-underline hover:underline" href="https://en.wikipedia.org/wiki/Database_normalization">Database Normalization</a></span></h1><div class="my-2 block mx-auto my-1 m-width[50ch] text-base font-normal font-serif italic text-theme-lightText [&amp;_a]:underline" data-test-id="sub-text">An article from <a href="https://en.wikipedia.org">Wikipedia</a></div><div class="mb-2 mt-3 text-sm text-theme-accent"><a href="/notes?category=Development" class="
    inline-block rounded-full border-none bg-theme-accent px-2 py-0.75 font-sans text-xs
    font-normal uppercase tracking-wider text-white no-underline transition-shadow duration-75
    ease-in hocus:shadow-outline hocus:shadow-theme-accent/50 selected:shadow-outline
    selected:shadow-theme-accent/50 md:text-2xs
  " data-technology="Development">Development</a></div></header><section><p>Database normalization is the process of restructuring a database to follow a series of <em>normal forms.</em> These are typically designated first normal form (1NF), second normal form (2NF), third normal form (3NF), etc. The goal is to reduce data redundancy and increase data integrity. This concept was initially introduced by Edgar F. Codd in 1970.</p>
<p>One key idea behind normalization is that <strong>each normal form must meet the criteria for the form before it</strong>. For example, before normalizing a relation to 3NF, it must first be in 2NF.</p>
<h2>Why Normalize?</h2>
<p>According to Codd, there are many benefits of normalizing data beyond 1NF:</p>
<ul>
<li>A normalized database does not have undesirable insertion, update and deletion anomalies.</li>
<li>When the database structure is extended, it’s much less likely that a normalized database will need to change its existing structure.</li>
<li>A normalized database is more informative to its users.</li>
<li>The design will remain adaptable and won’t become inefficient or slow due to changes in how the data is used or which queries become more common.</li>
</ul>
<p>When a database is not normalized, the following types of anomalies can occur:</p>
<ul>
<li><strong>Insertion anomaly:</strong> It’s possible that a record can’t be inserted into a relation at all. This can occur when some of the required data is not yet available.</li>
<li><strong>Update anomaly:</strong> If the same information is expressed in multiple rows, and one of the rows is updated, then a logical inconsistency between rows can occur.</li>
<li><strong>Deletion anomaly:</strong> It’s possible that deleting certain records necessitates deleting other data from completely different facts.</li>
</ul>
<p>The <a href="https://en.wikipedia.org/wiki/Database_normalization#Objectives">Objectives</a> section of the article gives good examples of each of these anomalies.</p>
<h2>Definitions</h2>
<p>Before we can dive into normalization, there are a bunch of terms that are helpful to define.</p>
<ul>
<li>
<p><strong>Attribute:</strong> A database column.</p>
</li>
<li>
<p><strong>Relation:</strong> A database table.</p>
</li>
<li>
<p><strong>Superkey:</strong> <em>Any</em> set of attributes that uniquely identifies a row in a relation. The set of all attributes is known as the <em>trivial superkey</em>.</p>
</li>
<li>
<p><strong>Candidate key (or just key):</strong> A minimal set of attributes that have a unique combination of values in each row. Removing any attribute from this set can produce duplicates in the database.
A candidate key is a <em>superkey</em> that can’t be reduced by removing an attribute.</p>
</li>
<li>
<p><strong>Primary key:</strong> A specific choice of a <em>candidate key</em>. This is purely a DBMS concept and not applicable to relational theory. However, from a <em>practical</em> standpoint, a <em>candidate key</em> can be thought of as the primary key of a relation (except when a relation has multiple candidate keys, which is very rare).</p>
</li>
<li>
<p><strong>Alternate key (or secondary key):</strong> A <em>candidate key</em> that is not the <em>primary key</em>.</p>
</li>
<li>
<p><strong>Prime attributes:</strong> The set of columns contained in <em>any</em> of the <em>candidate keys</em>.</p>
</li>
<li>
<p><strong>Non-prime attributes:</strong> The columns that do not occur in <em>any</em> <em>candidate keys</em>.</p>
</li>
<li>
<p><strong>Functional dependency:</strong> A constraint between two attributes in a database.</p>
<blockquote>
<p><em>X</em> → <em>Y</em> means that the values of <em>Y</em> are determined by the values of <em>X</em>. Two tuples sharing the same values of <em>X</em> will necessarily have the same values of <em>Y</em>.</p>
</blockquote>
</li>
<li>
<p><strong>Partial dependency:</strong> A <em>non-prime attribute</em> that is <em>functionally dependent</em> on any <em>proper subset</em> of any <em>candidate key</em> of the relation.
This is discussed in more detail in the Second Normal Form section below.</p>
</li>
<li>
<p><strong>Transitive dependency:</strong> A functional dependency where X → Z indirectly through another attribute Y (X → Y, Y → Z and Y ↛ X).
Transitive dependencies are named from the transitive property in mathematics (if A = B and B = C, then A = C) or logical proofs (if A implies B and B implies C, then A implies C).</p>
</li>
</ul>
<h2>First Normal Form (1NF)</h2>
<p>At the core of 1NF is the idea that values should be <em>atomic</em>. According to Codd, this means that <em>the value cannot be broken down into smaller pieces</em>.</p>
<h3>Disagreement</h3>
<p>Surprisingly, this definition is very hazy, and there’s some disagreement on what atomicity means. <a href="https://stackoverflow.com/a/24038895/262125">This Stack Overflow answer</a> gives a wonderful overview of some of the history and disagreements with the definition.</p>
<p>In Codd’s original paper, he intended columns not to contain sub-relations (paraphrased). Since this, it’s been more loosely interpreted as not allowing complex sub-types. For example, a <code>jsonb</code> data type would be considered a violation of 1NF, as would a JSON string.</p>
<p>Another computer scientist, Chris Date, has proposed an <a href="https://en.wikipedia.org/wiki/First_normal_form#1NF_tables_as_representations_of_relations">alternate definition</a>. However, it’s been criticized for disallowing <code>null</code> values.</p>
<p><a href="https://dba.stackexchange.com/a/2362">This Stack Exchange answer</a> gives an interesting definition that might be more practically useful.</p>
<blockquote>
<p>&quot;Atomic&quot; means if a value has component parts, the DBMS either ignores the existence of those parts, or it provides functions to manipulate them.</p>
</blockquote>
<p>This allows for data types such as a date, which can be further decomposed into a year, month and day. It also allows for more complex JSON types.</p>
<h3>Summary</h3>
<p>After sampling from several sources (including Chris Date’s definition), a good set of rules 1NF might be:</p>
<ul>
<li><strong>No ordering:</strong> The insertion order of rows or columns does not matter.</li>
<li><strong>No duplication:</strong> No rows are duplicated. This is achieved by using a primary key.</li>
<li><strong>Same type:</strong> Every value in a column should have the same data type.</li>
<li><strong>Atomic:</strong> The values in columns cannot be decomposed to sub-values unless the DBMS provides manipulation functions.
Generally, this means sticking with data types provided by the DBMS and now embedding pseudo-types within other types, such as JSON embedded in strings.</li>
</ul>
<h2>Second Normal Form (2NF)</h2>
<p>In addition to being in 1NF, a relation in 2NF must not have any partial dependencies. A <em>partial dependency</em> is where a non-prime attribute is functionally dependent on a <em>subset</em> of the candidate key (as opposed to the <em>entire</em> candidate key).</p>
<p>This can be broken down as follows:</p>
<ul>
<li>If a relation only has a single attribute in its candidate key, it will never have any partial dependencies, so it’s always in 2NF.</li>
<li>If a relation has a multi-attribute candidate key, then every non-prime attribute must depend on <em>all</em> candidate key attributes.</li>
</ul>
<h3>Example</h3>
<p>Wikipedia gives this great example.</p>
<div class="overflow-x-auto my-4"><table><thead>
<tr>
<th>Manufacturer</th>
<th>Model</th>
<th>Manufacturer Country</th>
</tr>
</thead>
<tbody>
<tr>
<td>Forte</td>
<td>X-Prime</td>
<td>Italy</td>
</tr>
<tr>
<td>Forte</td>
<td>Ultraclean</td>
<td>Italy</td>
</tr>
<tr>
<td>Dent-o-Fresh</td>
<td>EZbrush</td>
<td>USA</td>
</tr>
<tr>
<td>Brushmaster</td>
<td>SuperBrush</td>
<td>USA</td>
</tr>
<tr>
<td>Kobayashi</td>
<td>ST-60</td>
<td>Japan</td>
</tr>
<tr>
<td>Hoch</td>
<td>Toothmaster</td>
<td>Germany</td>
</tr>
<tr>
<td>Hoch</td>
<td>X-Prime</td>
<td>Germany</td>
</tr>
</tbody>
</table></div><p>In this example, the candidate key is {Manufacturer, Model}. Manufacturer Country is a non-prime attribute that is functionally dependent on Manufacturer. Since this is only part of the candidate key, Manufacturer has a partial dependency.</p>
<h3>Normalization</h3>
<p>To normalize a relation to conform to 2NF, remove the partially dependent attributes and place them in a separate relation where <em>all</em> candidate key attributes determine the value of the non-prime attributes.</p>
<h2>Third Normal Form (3NF)</h2>
<p>A relation is in 3NF if:</p>
<ul>
<li>The relation is in 2NF.</li>
<li>No non-prime attribute can be transitively dependent on a candidate key.</li>
</ul>
<p>In other words, a relation would <em>not</em> be in third normal form if it contained a non-prime attribute that was transitively dependent on a candidate key through another attribute.</p>
<h3>Example</h3>
<p>This definition is a bit difficult to understand formally, but much easier to understand via an example. Wikipedia gives the following Tournament Winners table.</p>
<div class="overflow-x-auto my-4"><table><thead>
<tr>
<th>Tournament</th>
<th>Year</th>
<th>Winner</th>
<th>Date of Birth</th>
</tr>
</thead>
<tbody>
<tr>
<td>Indiana Invitational</td>
<td>1998</td>
<td>Al Fredrickson</td>
<td>July 21, 1975</td>
</tr>
<tr>
<td>Cleveland Open</td>
<td>1999</td>
<td>Bob Albertson</td>
<td>September 28, 1968</td>
</tr>
<tr>
<td>Des Moines Masters</td>
<td>1999</td>
<td>Al Fredrickson</td>
<td>July 21, 1975</td>
</tr>
<tr>
<td>Indiana Invitational</td>
<td>1999</td>
<td>Chip Masterson</td>
<td>March 14, 1977</td>
</tr>
</tbody>
</table></div><p>In this example, the Date of Birth is dependent on the Winner, and the Winner is dependent on the Candidate Key {Tournament, Year}, so Date of Birth is transitively dependent on {Tournament, Year}.</p>
<p>This could easily lead to an update anomaly where a Date of Birth is different in separate records because it’s possible to have multiple Date of Birth values.</p>
<h3>Normalizing</h3>
<p>Like 2NF, the approach to normalizing 3NF is to split the attributes with transitive dependencies into a separate relation.</p>
<h2>Boyce-Codd Normal Form (BCNF)</h2>
<p>Raymond Boyce and Edger Codd developed Boyce-Codd normal form in 1971 to address certain issues with 3NF. It can be thought of as a slightly stricter version of 3NF that removes the edge cases.</p>
<p>Boyce and Codd’s development of this normal form was actually predated by Ian Heath in 1971.</p>
<blockquote>
<p>Since that definition predated Boyce and Codd's own definition by some three years, it seems to me that BCNF ought by rights to be called <em>Heath</em> normal form. But it isn't.</p>
</blockquote>
<h3>Rewriting Third Normal Form</h3>
<p>Before defining BCNF, it would be helpful to rewrite 3NF using this equivilent definition created by Carlo Zaniolo in 1981.</p>
<blockquote>
<p>A table is in 3NF if and only if for each of its functional dependencies X → Y, at least one of the following conditions holds:</p>
<ul>
<li>X contains Y (that is, Y is a subset of X, meaning X → Y is a trivial functional dependency)</li>
<li>X is a superkey</li>
<li>Every element of Y − X, the set difference between Y and X, is a prime attribute (i.e., each attribute in Y − X is contained in some candidate key).</li>
</ul>
</blockquote>
<p>In other words, a relation is in 3NF if, for <em>every</em> functional dependency X → Y, one of the following is true:</p>
<ul>
<li>Y is a subset of X</li>
<li>X is a superkey</li>
<li>Each element contained in Y - X is a prime attribute.</li>
</ul>
<h3>Definition</h3>
<p>With that ironed out, we can define BCNF and simply lacking the last option for functional dependencies:</p>
<blockquote>
<p>A relational schema R is in Boyce–Codd normal form if and only if for every one of its dependencies X → Y, at least one of the following conditions hold:</p>
<ul>
<li>X → Y is a trivial functional dependency (Y ⊆ X)</li>
<li>X is a superkey for schema R</li>
</ul>
</blockquote>
<p>In other words, a relation is in 3NF if, for <em>every</em> functional dependency X → Y, one of the following is true:</p>
<ul>
<li>Y is a subset of X</li>
<li>X is a superkey</li>
</ul>
<h3>Example</h3>
<p>Wikipedia gives this tricky Tennis Court Bookings relation as an example.</p>
<div class="overflow-x-auto my-4"><table><thead>
<tr>
<th>Court</th>
<th>Start time</th>
<th>End time</th>
<th>Rate Type</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>09:30</td>
<td>10:30</td>
<td>SAVER</td>
</tr>
<tr>
<td>1</td>
<td>11:00</td>
<td>12:00</td>
<td>SAVER</td>
</tr>
<tr>
<td>1</td>
<td>14:00</td>
<td>15:30</td>
<td>STANDARD</td>
</tr>
<tr>
<td>2</td>
<td>10:00</td>
<td>11:30</td>
<td>PREMIUM-B</td>
</tr>
<tr>
<td>2</td>
<td>11:30</td>
<td>13:30</td>
<td>PREMIUM-B</td>
</tr>
<tr>
<td>2</td>
<td>15:00</td>
<td>16:30</td>
<td>PREMIUM-A</td>
</tr>
</tbody>
</table></div><ul>
<li>Each row represents a booking at a tennis club. The tennis club has one hard court (Court 1) and one grass court (Court 2).</li>
<li>Each booking has a rate type associated with it. The court and the booker’s membership status determine the Rate Type:
<ul>
<li>Court 1 bookings made by members have SAVER.</li>
<li>Court 1 bookings made by non-members have STANDARD.</li>
<li>Court 2 bookings made by members have PREMIUM-A.</li>
<li>Court 2 bookings made by non-members have Premium-B.</li>
</ul>
</li>
</ul>
<p>Combining these attributes results in four possible candidate keys:</p>
<ul>
<li>S₁ = {Court, Start time}</li>
<li>S₂ = {Court, End time}</li>
<li>S₃ = {Rate type, Start time}</li>
<li>S₄ = {Rate type, End time}</li>
</ul>
<p>Intuitively, this makes sense. Court bookings cannot overlap, and the Rate Type is derived partially from the Court.</p>
<p>The tricky thing about these examples is <em>none</em> of the attributes in the Court Bookings table are non-prime because all attributes are contained in at least one of the candidate keys. Therefore, this table can never violate 3NF.</p>
<p>However, it violates BCNF because the functional dependency Rate Type → Court because Court is not a subset of Rate Type and Rate Type is not a superkey.</p>
<h3>Normalization</h3>
<p>Like the other options, the key to normalizing to 3NF involves splitting the table. However, unlike 3NF, this is <a href="https://en.wikipedia.org/wiki/Boyce%E2%80%93Codd_normal_form#Achievability_of_BCNF">not always possible</a>. 😮</p>
</section></article><!--/$--></main><script src="/_next/static/chunks/webpack-c955a7fd519a96e8.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"6:\"$Sreact.fragment\"\n7:I[7556,[],\"\"]\n8:I[8418,[],\"\"]\n9:I[9306,[\"345\",\"static/chunks/app/not-found-03d2bac40c7bb44b.js\"],\"default\"]\nb:I[1406,[\"738\",\"static/chunks/738-a0d7c9ce962eb776.js\",\"763\",\"static/chunks/app/notes/layout-c9c0172185e9fa00.js\"],\"MainNavigation\"]\nc:\"$Sreact.suspense\"\ne:I[5277,[],\"OutletBoundary\"]\n10:I[5277,[],\"MetadataBoundary\"]\n12:I[5277,[],\"ViewportBoundary\"]\n14:I[6379,[],\"\"]\n1:HL[\"/_next/static/css/052c8b13a035a85d.css\",\"style\"]\n2:HL[\"/_next/static/css/5aabacac4a7bcbc4.css\",\"style\"]\n3:HL[\"/_next/static/css/b7bdc2d4d4aa6554.css\",\"style\"]\n4:HL[\"/_next/static/css/9cad1c3a621a47c7.css\",\"style\"]\n5:HL[\"/_next/static/css/34f92507e61baad2.css\",\"style\"]\na:T5e1,M219.572308,442 L219.572308,372.487514 L243,372.487514 L243,299.237798 L219.572308,299.237798 L219.572308,3 L82.9938462,3 L0,303.971623 L0,372.487514 L130.098462,372.487514 L130.098462,442 L219.572308,442 Z M130,300 L78,300 L130,79 L130,300 Z M373,446 C410.173104,446 438.799714,435.629836 458.879828,414.889509 C478.959943,394.149182 489,364.28311 489,325.291295 L489,325.291295 L489,127.677455 C489,86.5286458 479.457797,54.9618676 460.373391,32.9771205 C441.288984,10.9923735 412.164521,0 373,0 C334.001431,0 304.918455,10.9923735 285.751073,32.9771205 C266.583691,54.9618676 257,86.5286458 257,127.677455 L257,127.677455 L257,325.291295 C257,364.28311 267.081545,394.149182 287.244635,414.889509 C307.407725,435.629836 335.992847,446 373,446 Z M372.5,365 C365.909962,365 360.679119,361.927448 356.807471,355.782343 C352.935824,349.637238 351,342.744755 351,335.104895 L351,335.104895 L351,118.61451 C351,108.317308 352.112069,99.3072552 354.336207,91.5843531 C356.560345,83.861451 362.614943,80 372.5,80 C382.385057,80 388.439655,83.861451 390.663793,91.5843531 C392.887931,99.3072552 394,108.317308 394,118.61451 L394,118.61451 L394,335.104895 C394,342.744755 392.105364,349.637238 388.316092,355.782343 C384.52682,361.927448 379.254789,365 372.5,365 Z M722.572308,442 L722.572308,372.487514 L746,372.487514 L746,299.237798 L722.572308,299.237798 L722.572308,3 L"])</script><script>self.__next_f.push([1,"585.993846,3 L503,303.971623 L503,372.487514 L633.098462,372.487514 L633.098462,442 L722.572308,442 Z M633,300 L581,300 L633,79 L633,300 Z"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"cjlwdo_fzwjRV0ncHZVOo\",\"p\":\"\",\"c\":[\"\",\"notes\",\"wikipedia-database-normalization\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"notes\",{\"children\":[[\"slug\",\"wikipedia-database-normalization\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$6\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/052c8b13a035a85d.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en-us\",\"className\":\"h-full text-[19px] md:text-[21px] lg:text-[22px]\",\"children\":[[\"$\",\"head\",null,{\"children\":[[\"$\",\"link\",null,{\"rel\":\"preconnect\",\"href\":\"https://fonts.googleapis.com\"}],[\"$\",\"link\",null,{\"rel\":\"preconnect\",\"href\":\"https://fonts.gstatic.com\",\"crossOrigin\":\"anonymous\"}],[\"$\",\"link\",null,{\"href\":\"https://fonts.googleapis.com/css2?family=Gentium+Book+Plus:ital,wght@0,400;0,700;1,400;1,700\u0026family=Open+Sans:ital,wght@0,400;0,700;0,800;1,400;1,700;1,800\u0026family=Source+Code+Pro:ital,wght@0,400;0,700;1,400;1,700\u0026display=swap\",\"rel\":\"stylesheet\"}],[\"$\",\"link\",null,{\"rel\":\"shortcut icon\",\"type\":\"image/png\",\"href\":\"/_next/static/media/flannel.5168cfc2.png\"}]]}],[\"$\",\"body\",null,{\"className\":\"flex h-full flex-col bg-theme-background font-serif font-normal text-theme-text *:flex-[0_0_auto]\",\"suppressHydrationWarning\":true,\"children\":[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L8\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[\"$\",\"$L9\",null,{\"viewBox\":\"0 0 746 446\",\"title\":\"404\",\"children\":[[\"$\",\"rect\",null,{\"x\":0,\"y\":0,\"width\":746,\"height\":446,\"fill\":\"transparent\"}],[\"$\",\"path\",null,{\"className\":\"fill-[url('#svg-data-background')]\",\"id\":\"not-found\",\"d\":\"$a\"}]]}],\"notFoundStyles\":[]}]}]]}]]}],{\"children\":[\"notes\",[\"$\",\"$6\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/5aabacac4a7bcbc4.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/b7bdc2d4d4aa6554.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"2\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/9cad1c3a621a47c7.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"3\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/34f92507e61baad2.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[[\"$\",\"$Lb\",null,{}],[\"$\",\"main\",null,{\"className\":\"mx-auto w-[70ch] max-w-full px-2 md:px-4\",\"children\":[\"$\",\"$c\",null,{\"children\":[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"notes\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L8\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]}]}]]]}],{\"children\":[[\"slug\",\"wikipedia-database-normalization\",\"d\"],[\"$\",\"$6\",\"c\",{\"children\":[null,[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"notes\",\"children\",\"$0:f:0:1:2:children:2:children:0\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L8\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$6\",\"c\",{\"children\":[\"$Ld\",null,[\"$\",\"$Le\",null,{\"children\":\"$Lf\"}]]}],{},null]},null]},null]},null],[\"$\",\"$6\",\"h\",{\"children\":[null,[\"$\",\"$6\",\"J8kgtJljTVp6HVhOupTJP\",{\"children\":[[\"$\",\"$L10\",null,{\"children\":\"$L11\"}],[\"$\",\"$L12\",null,{\"children\":\"$L13\"}],null]}]]}]]],\"m\":\"$undefined\",\"G\":[\"$14\",\"$undefined\"],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"13:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n"])</script><script>self.__next_f.push([1,"15:I[5677,[\"867\",\"static/chunks/867-34944a4304bcfa99.js\",\"740\",\"static/chunks/app/notes/%5Bslug%5D/page-5c68db966a75d177.js\"],\"Note\"]\n11:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"1\",{\"children\":\"Landon Schropp – Database Normalization\"}],[\"$\",\"meta\",\"2\",{\"name\":\"description\",\"content\":\"Landon Schropp's notes about Database Normalization\"}],[\"$\",\"meta\",\"3\",{\"name\":\"author\",\"content\":\"Landon Schropp\"}]]\nf:null\n16:T30d4,"])</script><script>self.__next_f.push([1,"Database normalization is the process of restructuring a database to follow a series of _normal forms._ These are typically designated first normal form (1NF), second normal form (2NF), third normal form (3NF), etc. The goal is to reduce data redundancy and increase data integrity. This concept was initially introduced by Edgar F. Codd in 1970.\n\nOne key idea behind normalization is that **each normal form must meet the criteria for the form before it**. For example, before normalizing a relation to 3NF, it must first be in 2NF.\n\n## Why Normalize?\n\nAccording to Codd, there are many benefits of normalizing data beyond 1NF:\n\n- A normalized database does not have undesirable insertion, update and deletion anomalies.\n- When the database structure is extended, it’s much less likely that a normalized database will need to change its existing structure.\n- A normalized database is more informative to its users.\n- The design will remain adaptable and won’t become inefficient or slow due to changes in how the data is used or which queries become more common.\n\nWhen a database is not normalized, the following types of anomalies can occur:\n\n- **Insertion anomaly:** It’s possible that a record can’t be inserted into a relation at all. This can occur when some of the required data is not yet available.\n- **Update anomaly:** If the same information is expressed in multiple rows, and one of the rows is updated, then a logical inconsistency between rows can occur.\n- **Deletion anomaly:** It’s possible that deleting certain records necessitates deleting other data from completely different facts.\n\nThe [Objectives](https://en.wikipedia.org/wiki/Database_normalization#Objectives) section of the article gives good examples of each of these anomalies.\n\n## Definitions\n\nBefore we can dive into normalization, there are a bunch of terms that are helpful to define.\n\n- **Attribute:** A database column.\n- **Relation:** A database table.\n\n- **Superkey:** _Any_ set of attributes that uniquely identifies a row in a relation. The set of all attributes is known as the _trivial superkey_.\n- **Candidate key (or just key):** A minimal set of attributes that have a unique combination of values in each row. Removing any attribute from this set can produce duplicates in the database.\n  A candidate key is a _superkey_ that can’t be reduced by removing an attribute.\n- **Primary key:** A specific choice of a _candidate key_. This is purely a DBMS concept and not applicable to relational theory. However, from a _practical_ standpoint, a _candidate key_ can be thought of as the primary key of a relation (except when a relation has multiple candidate keys, which is very rare).\n- **Alternate key (or secondary key):** A _candidate key_ that is not the _primary key_.\n- **Prime attributes:** The set of columns contained in _any_ of the _candidate keys_.\n- **Non-prime attributes:** The columns that do not occur in _any_ _candidate keys_.\n- **Functional dependency:** A constraint between two attributes in a database.\n  \u003e *X* → *Y* means that the values of *Y* are determined by the values of *X*. Two tuples sharing the same values of *X* will necessarily have the same values of *Y*.\n- **Partial dependency:** A _non-prime attribute_ that is _functionally dependent_ on any _proper subset_ of any _candidate key_ of the relation.\n  This is discussed in more detail in the Second Normal Form section below.\n- **Transitive dependency:** A functional dependency where X → Z indirectly through another attribute Y (X → Y, Y → Z and Y ↛ X).\n  Transitive dependencies are named from the transitive property in mathematics (if A = B and B = C, then A = C) or logical proofs (if A implies B and B implies C, then A implies C).\n\n## First Normal Form (1NF)\n\nAt the core of 1NF is the idea that values should be _atomic_. According to Codd, this means that _the value cannot be broken down into smaller pieces_.\n\n### Disagreement\n\nSurprisingly, this definition is very hazy, and there’s some disagreement on what atomicity means. [This Stack Overflow answer](https://stackoverflow.com/a/24038895/262125) gives a wonderful overview of some of the history and disagreements with the definition.\n\nIn Codd’s original paper, he intended columns not to contain sub-relations (paraphrased). Since this, it’s been more loosely interpreted as not allowing complex sub-types. For example, a `jsonb` data type would be considered a violation of 1NF, as would a JSON string.\n\nAnother computer scientist, Chris Date, has proposed an [alternate definition](https://en.wikipedia.org/wiki/First_normal_form#1NF_tables_as_representations_of_relations). However, it’s been criticized for disallowing `null` values.\n\n[This Stack Exchange answer](https://dba.stackexchange.com/a/2362) gives an interesting definition that might be more practically useful.\n\n\u003e \"Atomic\" means if a value has component parts, the DBMS either ignores the existence of those parts, or it provides functions to manipulate them.\n\nThis allows for data types such as a date, which can be further decomposed into a year, month and day. It also allows for more complex JSON types.\n\n### Summary\n\nAfter sampling from several sources (including Chris Date’s definition), a good set of rules 1NF might be:\n\n- **No ordering:** The insertion order of rows or columns does not matter.\n- **No duplication:** No rows are duplicated. This is achieved by using a primary key.\n- **Same type:** Every value in a column should have the same data type.\n- **Atomic:** The values in columns cannot be decomposed to sub-values unless the DBMS provides manipulation functions.\n  Generally, this means sticking with data types provided by the DBMS and now embedding pseudo-types within other types, such as JSON embedded in strings.\n\n## Second Normal Form (2NF)\n\nIn addition to being in 1NF, a relation in 2NF must not have any partial dependencies. A _partial dependency_ is where a non-prime attribute is functionally dependent on a _subset_ of the candidate key (as opposed to the _entire_ candidate key).\n\nThis can be broken down as follows:\n\n- If a relation only has a single attribute in its candidate key, it will never have any partial dependencies, so it’s always in 2NF.\n- If a relation has a multi-attribute candidate key, then every non-prime attribute must depend on _all_ candidate key attributes.\n\n### Example\n\nWikipedia gives this great example.\n\n| Manufacturer | Model       | Manufacturer Country |\n| ------------ | ----------- | -------------------- |\n| Forte        | X-Prime     | Italy                |\n| Forte        | Ultraclean  | Italy                |\n| Dent-o-Fresh | EZbrush     | USA                  |\n| Brushmaster  | SuperBrush  | USA                  |\n| Kobayashi    | ST-60       | Japan                |\n| Hoch         | Toothmaster | Germany              |\n| Hoch         | X-Prime     | Germany              |\n\nIn this example, the candidate key is {Manufacturer, Model}. Manufacturer Country is a non-prime attribute that is functionally dependent on Manufacturer. Since this is only part of the candidate key, Manufacturer has a partial dependency.\n\n### Normalization\n\nTo normalize a relation to conform to 2NF, remove the partially dependent attributes and place them in a separate relation where _all_ candidate key attributes determine the value of the non-prime attributes.\n\n## Third Normal Form (3NF)\n\nA relation is in 3NF if:\n\n- The relation is in 2NF.\n- No non-prime attribute can be transitively dependent on a candidate key.\n\nIn other words, a relation would _not_ be in third normal form if it contained a non-prime attribute that was transitively dependent on a candidate key through another attribute.\n\n### Example\n\nThis definition is a bit difficult to understand formally, but much easier to understand via an example. Wikipedia gives the following Tournament Winners table.\n\n| Tournament           | Year | Winner         | Date of Birth      |\n| -------------------- | ---- | -------------- | ------------------ |\n| Indiana Invitational | 1998 | Al Fredrickson | July 21, 1975      |\n| Cleveland Open       | 1999 | Bob Albertson  | September 28, 1968 |\n| Des Moines Masters   | 1999 | Al Fredrickson | July 21, 1975      |\n| Indiana Invitational | 1999 | Chip Masterson | March 14, 1977     |\n\nIn this example, the Date of Birth is dependent on the Winner, and the Winner is dependent on the Candidate Key {Tournament, Year}, so Date of Birth is transitively dependent on {Tournament, Year}.\n\nThis could easily lead to an update anomaly where a Date of Birth is different in separate records because it’s possible to have multiple Date of Birth values.\n\n### Normalizing\n\nLike 2NF, the approach to normalizing 3NF is to split the attributes with transitive dependencies into a separate relation.\n\n## Boyce-Codd Normal Form (BCNF)\n\nRaymond Boyce and Edger Codd developed Boyce-Codd normal form in 1971 to address certain issues with 3NF. It can be thought of as a slightly stricter version of 3NF that removes the edge cases.\n\nBoyce and Codd’s development of this normal form was actually predated by Ian Heath in 1971.\n\n\u003e Since that definition predated Boyce and Codd's own definition by some three years, it seems to me that BCNF ought by rights to be called *Heath* normal form. But it isn't.\n\n### Rewriting Third Normal Form\n\nBefore defining BCNF, it would be helpful to rewrite 3NF using this equivilent definition created by Carlo Zaniolo in 1981.\n\n\u003e A table is in 3NF if and only if for each of its functional dependencies X → Y, at least one of the following conditions holds:\n\u003e\n\u003e - X contains Y (that is, Y is a subset of X, meaning X → Y is a trivial functional dependency)\n\u003e - X is a superkey\n\u003e - Every element of Y − X, the set difference between Y and X, is a prime attribute (i.e., each attribute in Y − X is contained in some candidate key).\n\nIn other words, a relation is in 3NF if, for _every_ functional dependency X → Y, one of the following is true:\n\n- Y is a subset of X\n- X is a superkey\n- Each element contained in Y - X is a prime attribute.\n\n### Definition\n\nWith that ironed out, we can define BCNF and simply lacking the last option for functional dependencies:\n\n\u003e A relational schema R is in Boyce–Codd normal form if and only if for every one of its dependencies X → Y, at least one of the following conditions hold:\n\u003e\n\u003e - X → Y is a trivial functional dependency (Y ⊆ X)\n\u003e - X is a superkey for schema R\n\nIn other words, a relation is in 3NF if, for _every_ functional dependency X → Y, one of the following is true:\n\n- Y is a subset of X\n- X is a superkey\n\n### Example\n\nWikipedia gives this tricky Tennis Court Bookings relation as an example.\n\n| Court | Start time | End time | Rate Type |\n| ----- | ---------- | -------- | --------- |\n| 1     | 09:30      | 10:30    | SAVER     |\n| 1     | 11:00      | 12:00    | SAVER     |\n| 1     | 14:00      | 15:30    | STANDARD  |\n| 2     | 10:00      | 11:30    | PREMIUM-B |\n| 2     | 11:30      | 13:30    | PREMIUM-B |\n| 2     | 15:00      | 16:30    | PREMIUM-A |\n\n- Each row represents a booking at a tennis club. The tennis club has one hard court (Court 1) and one grass court (Court 2).\n- Each booking has a rate type associated with it. The court and the booker’s membership status determine the Rate Type:\n  - Court 1 bookings made by members have SAVER.\n  - Court 1 bookings made by non-members have STANDARD.\n  - Court 2 bookings made by members have PREMIUM-A.\n  - Court 2 bookings made by non-members have Premium-B.\n\nCombining these attributes results in four possible candidate keys:\n\n- S₁ = {Court, Start time}\n- S₂ = {Court, End time}\n- S₃ = {Rate type, Start time}\n- S₄ = {Rate type, End time}\n\nIntuitively, this makes sense. Court bookings cannot overlap, and the Rate Type is derived partially from the Court.\n\nThe tricky thing about these examples is _none_ of the attributes in the Court Bookings table are non-prime because all attributes are contained in at least one of the candidate keys. Therefore, this table can never violate 3NF.\n\nHowever, it violates BCNF because the functional dependency Rate Type → Court because Court is not a subset of Rate Type and Rate Type is not a superkey.\n\n### Normalization\n\nLike the other options, the key to normalizing to 3NF involves splitting the table. However, unlike 3NF, this is [not always possible](https://en.wikipedia.org/wiki/Boyce%E2%80%93Codd_normal_form#Achievability_of_BCNF). 😮"])</script><script>self.__next_f.push([1,"d:[\"$\",\"$L15\",null,{\"note\":{\"title\":\"Database Normalization\",\"slug\":\"wikipedia-database-normalization\",\"date\":\"2024-04-01\",\"published\":true,\"markdown\":\"$16\",\"filePath\":\"/Users/landon/Notes/Resources/Notes/Development/Database Normalization (Wikipedia).md\",\"authors\":[],\"category\":\"Development\",\"media\":\"Article\",\"url\":\"https://en.wikipedia.org/wiki/Database_normalization\",\"source\":\"Wikipedia\"}}]\n"])</script></body></html>